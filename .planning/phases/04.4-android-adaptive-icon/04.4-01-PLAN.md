---
phase: 04.4-android-adaptive-icon
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - push_up_5050/assets/launcher/icon_foreground.png
  - push_up_5050/pubspec.yaml
autonomous: false

must_haves:
  truths:
    - "Foreground asset contains only logo elements (push-up figure + 5050 text) without dark background"
    - "Foreground asset is centered within 66x66dp safe zone (no clipping on circular/squircle launchers)"
    - "pubspec.yaml adaptive_icon_background uses brand orange #FF6B00"
    - "pubspec.yaml adaptive_icon_foreground points to icon_foreground.png"
  artifacts:
    - path: "push_up_5050/assets/launcher/icon_foreground.png"
      provides: "Foreground layer for adaptive icon (logo only, transparent background)"
      min_size: "1024x1024px (for xxxhdpi 4x scaling)"
    - path: "push_up_5050/pubspec.yaml"
      provides: "flutter_launcher_icons configuration"
      contains: "adaptive_icon_background: \"#FF6B00\""
      contains: "adaptive_icon_foreground: \"assets/launcher/icon_foreground.png\""
  key_links:
    - from: "push_up_5050/pubspec.yaml"
      to: "push_up_5050/assets/launcher/icon_foreground.png"
      via: "adaptive_icon_foreground path reference"
      pattern: "adaptive_icon_foreground.*icon_foreground"
---

<objective>
Create foreground asset and configure flutter_launcher_icons for adaptive icon generation with brand orange background.

Purpose: Prepare the assets and configuration needed to generate Android adaptive icons that display correctly on all launcher shapes.

Output: New icon_foreground.png asset and updated pubspec.yaml configuration ready for icon generation.
</objective>

<execution_context>
@C:\Users\olegn\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\olegn\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/phases/04.4-android-adaptive-icon/04.4-RESEARCH.md
@.planning/phases/04.4-android-adaptive-icon/04.4-CONTEXT.md
@push_up_5050/pubspec.yaml
@push_up_5050/assets/launcher/icon.png

# Current State
- icon.png exists (512x512) with full logo including dark gradient background
- pubspec.yaml uses #000000 background (incorrect - should be #FF6B00)
- No icon_foreground.png exists
- flutter_launcher_icons v0.13.1 already installed
</context>

<tasks>

<task type="auto">
  <name>Extract foreground layer from existing icon</name>
  <files>push_up_5050/assets/launcher/icon_foreground.png</files>
  <action>
Create a foreground-only asset from the existing icon.png. The foreground should contain:
- Push-up figure (silhouette/person doing push-up)
- "5050" text
- Orange ring/border (optional - can include if part of logo identity)
- Transparent background (no dark gradient)

The foreground must be centered and sized to fit within the 66x66dp safe zone.

Use ImageMagick or similar CLI tool to extract the foreground:
1. Read the existing icon.png
2. Create a mask or extract the central logo elements
3. Output as icon_foreground.png with transparent background

If ImageMagick extraction is not feasible due to the icon's complexity, create a new icon_foreground.png that:
- Uses 1024x1024px canvas (for xxxhdpi 4x scaling from 256dp base)
- Has transparent background
- Contains the PUSHUP 5050 logo centered
- Logo should occupy approximately 500x500px to stay within safe zone

IMPORTANT: The foreground layer MUST have a transparent background. The orange background will be applied by the adaptive_icon_background color (#FF6B00) specified in pubspec.yaml.
  </action>
  <verify>
1. File exists: push_up_5050/assets/launcher/icon_foreground.png
2. File is valid PNG with transparency: `file push_up_5050/assets/launcher/icon_foreground.png` shows "RGBA" or similar
3. Image dimensions are at least 1024x1024px: `identify push_up_5050/assets/launcher/icon_foreground.png`
  </verify>
  <done>
icon_foreground.png exists as transparent PNG with centered logo elements, suitable for use as adaptive icon foreground layer.
  </done>
</task>

<task type="auto">
  <name>Update pubspec.yaml with adaptive icon configuration</name>
  <files>push_up_5050/pubspec.yaml</files>
  <action>
Update the flutter_launcher_icons configuration in pubspec.yaml:

1. Change adaptive_icon_background from "#000000" to "#FF6B00" (brand orange)
2. Change adaptive_icon_foreground from "assets/launcher/icon.png" to "assets/launcher/icon_foreground.png"
3. Keep all other settings unchanged (android: true, ios: false, image_path, min_sdk_android: 21)

The configuration should look like:
```yaml
flutter_launcher_icons:
  android: true
  ios: false
  image_path: "assets/launcher/icon.png"
  adaptive_icon_background: "#FF6B00"
  adaptive_icon_foreground: "assets/launcher/icon_foreground.png"
  min_sdk_android: 21
```

DO NOT change any other parts of pubspec.yaml.
  </action>
  <verify>
After editing, verify with: `grep -A 5 "flutter_launcher_icons:" push_up_5050/pubspec.yaml`

Output should show:
- adaptive_icon_background: "#FF6B00"
- adaptive_icon_foreground: "assets/launcher/icon_foreground.png"
  </verify>
  <done>
pubspec.yaml correctly configures flutter_launcher_icons with brand orange background and foreground asset path.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Foreground asset (icon_foreground.png) and updated pubspec.yaml configuration</what-built>
  <how-to-verify>
1. Review the generated icon_foreground.png:
   - Open in an image viewer
   - Confirm background is transparent (checkerboard pattern visible)
   - Confirm logo is centered
   - Confirm logo elements are clearly visible (push-up figure, "5050" text)

2. Review pubspec.yaml changes:
   - Confirm adaptive_icon_background is "#FF6B00"
   - Confirm adaptive_icon_foreground points to icon_foreground.png

If the foreground extraction quality is poor (e.g., jagged edges, missing elements, wrong colors), regenerate the asset before proceeding.

Type "approved" to continue, or describe issues to fix.
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues with the foreground asset</resume-signal>
</task>

</tasks>

<verification>
After checkpoint approval, verify:
1. icon_foreground.png exists and is a valid transparent PNG
2. pubspec.yaml has correct adaptive icon configuration
3. No syntax errors in pubspec.yaml (try `flutter pub get` dry run)
</verification>

<success_criteria>
1. icon_foreground.png exists with transparent background and centered logo
2. pubspec.yaml configured with #FF6B00 background and icon_foreground.png foreground path
3. Both assets ready for flutter_launcher_icons generation
</success_criteria>

<output>
After completion, create `.planning/phases/04.4-android-adaptive-icon/04.4-01-SUMMARY.md`
</output>
