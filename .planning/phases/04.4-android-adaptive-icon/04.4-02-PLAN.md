---
phase: 04.4-android-adaptive-icon
plan: 02
type: execute
wave: 2
depends_on: [04.4-01]
files_modified:
  - push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml
  - push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml
  - push_up_5050/android/app/src/main/res/drawable-anydpi-v26/ic_launcher_foreground.xml
  - push_up_5050/android/app/src/main/res/mipmap-*/ic_launcher.png
  - push_up_5050/android/app/src/main/res/mipmap-*/ic_launcher_round.png
autonomous: true

must_haves:
  truths:
    - "mipmap-anydpi-v26 directory exists with ic_launcher.xml and ic_launcher_round.xml"
    - "Adaptive icon XML references foreground drawable and background color"
    - "All density directories (mdpi through xxxhdpi) contain generated icons"
    - "Legacy icons (mipmap-*/ic_launcher.png) have opaque backgrounds"
  artifacts:
    - path: "push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml"
      provides: "Adaptive icon XML for API 26+"
      contains: "<adaptive-icon"
      contains: "<background"
      contains: "<foreground"
    - path: "push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml"
      provides: "Round adaptive icon XML"
      contains: "<adaptive-icon"
    - path: "push_up_5050/android/app/src/main/res/mipmap-mdpi/ic_launcher.png"
      provides: "Legacy icon for mdpi (160dpi)"
    - path: "push_up_5050/android/app/src/main/res/mipmap-hdpi/ic_launcher.png"
      provides: "Legacy icon for hdpi (240dpi)"
    - path: "push_up_5050/android/app/src/main/res/mipmap-xhdpi/ic_launcher.png"
      provides: "Legacy icon for xhdpi (320dpi)"
    - path: "push_up_5050/android/app/src/main/res/mipmap-xxhdpi/ic_launcher.png"
      provides: "Legacy icon for xxhdpi (480dpi)"
    - path: "push_up_5050/android/app/src/main/res/mipmap-xxxhdpi/ic_launcher.png"
      provides: "Legacy icon for xxxhdpi (640dpi)"
  key_links:
    - from: "push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml"
      to: "push_up_5050/assets/launcher/icon_foreground.png"
      via: "flutter_launcher_icons generation creates PNG references"
      pattern: "ic_launcher_foreground"
    - from: "push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml"
      to: "#FF6B00"
      via: "background color reference"
      pattern: "#FF6B00|ic_launcher_background"
---

<objective>
Generate Android adaptive icons for all screen densities using flutter_launcher_icons.

Purpose: Create the complete set of adaptive icon resources (XML layer definitions + PNG assets for all densities) that Android uses to display the app icon on various launcher shapes.

Output: Complete set of generated icon resources in android/app/src/main/res/ directories.
</objective>

<execution_context>
@C:\Users\olegn\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\olegn\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/phases/04.4-android-adaptive-icon/04.4-RESEARCH.md
@.planning/phases/04.4-android-adaptive-icon/04.4-01-SUMMARY.md
@push_up_5050/pubspec.yaml

# Prerequisites
- icon_foreground.png exists (created in 04.4-01)
- pubspec.yaml configured with correct adaptive icon settings (updated in 04.4-01)
- flutter_launcher_icons v0.13.1 installed
</context>

<tasks>

<task type="auto">
  <name>Run flutter_launcher_icons generator</name>
  <files>push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/*</files>
  <action>
Execute the flutter_launcher_icons package to generate all icon resources:

1. Navigate to push_up_5050 directory
2. Run `flutter pub get` to ensure dependencies are current
3. Run `dart run flutter_launcher_icons` to generate icons

Expected output:
- Package will read configuration from pubspec.yaml
- Generate mipmap-anydpi-v26/ic_launcher.xml and ic_launcher_round.xml
- Generate foreground PNG assets for all densities (drawable-anydpi-v26/ic_launcher_foreground.xml)
- Generate legacy PNG icons for mipmap-mdpi through mipmap-xxxhdpi
- Update any existing icons with new versions

If the command fails with errors:
- Check that icon_foreground.png exists at the specified path
- Verify pubspec.yaml YAML syntax is correct (no indentation errors)
- Ensure adaptive_icon_background and adaptive_icon_foreground are both specified

DO NOT manually create or modify XML files - let flutter_launcher_icons handle everything.
  </action>
  <verify>
1. Check mipmap-anydpi-v26 directory was created:
   `ls push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/`
   Should show: ic_launcher.xml, ic_launcher_round.xml

2. Check adaptive icon XML content:
   `cat push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml`
   Should contain <adaptive-icon>, <background>, <foreground> elements

3. Check all density directories have icons:
   `ls push_up_5050/android/app/src/main/res/mipmap-*/ic_launcher.png`
   Should show 5+ files (mdpi, hdpi, xhdpi, xxhdpi, xxxhdpi, etc.)

4. Verify foreground PNG was generated:
   `ls push_up_5050/android/app/src/main/res/drawable-anydpi-v26/`
   Should show ic_launcher_foreground.xml or PNG files
  </verify>
  <done>
mipmap-anydpi-v26 directory exists with ic_launcher.xml and ic_launcher_round.xml. All density directories (mdpi through xxxhdpi) contain both ic_launcher.png and ic_launcher_round.png. Foreground layer assets exist.
  </done>
</task>

</tasks>

<verification>
After generation completes:
1. Confirm mipmap-anydpi-v26/ic_launcher.xml exists and is valid XML
2. Confirm ic_launcher.xml references foreground drawable and background
3. Confirm at least 5 density directories have generated icons
4. Confirm no error messages in generator output
</verification>

<success_criteria>
1. flutter_launcher_icons runs without errors
2. mipmap-anydpi-v26 directory created with ic_launcher.xml and ic_launcher_round.xml
3. All standard density directories (mdpi, hdpi, xhdpi, xxhdpi, xxxhdpi) contain generated icons
4. Foreground layer assets generated correctly
</success_criteria>

<output>
After completion, create `.planning/phases/04.4-android-adaptive-icon/04.4-02-SUMMARY.md`
</output>
