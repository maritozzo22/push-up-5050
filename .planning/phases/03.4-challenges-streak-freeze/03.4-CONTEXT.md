# Phase 03.4: Challenges & Streak Freeze - Context

**Gathered:** 2026-01-26
**Status:** Ready for planning

## Phase Boundary

Weekly challenges provide additional motivation with streak protection. User can view and complete weekly challenges for bonus points (3K-5K), and has 1 streak freeze per 30-day rolling window to prevent streak reset. Both features integrate into existing UI (Today box and Home screen).

---

## Implementation Decisions

### Weekly Challenge Mechanics

**Challenge Pool (5 types, randomly selected each week):**
1. **Total Volume** - Complete X total push-ups this week
2. **Max Single Session** - Do X reps in one workout session
3. **5 Workouts** - Complete 5 workout sessions this week
4. **7-Day Streak** - Exercise every day for 7 consecutive days
5. **Peak Day** - One day this week, hit daily goal + 15% (e.g., 10 goal → 13 reps in one session)

**Challenge Selection:**
- New challenge randomly selected each week
- Challenge changes on Sunday (week boundary)
- Same challenge type can appear multiple weeks (random with replacement)

**Point Rewards (by difficulty):**
- 5 Workouts = 3,000 points (easier)
- Total Volume = 4,000 points (medium)
- Max Single Session = 4,000 points (medium)
- 7-Day Streak = 5,000 points (harder)
- Peak Day = 5,000 points (harder)

### Streak Freeze Mechanics

**Freeze System:**
- 1 streak freeze per 30-day rolling window (not calendar month)
- Protects entire missed week (Monday-Sunday) when activated
- Manual activation only (user must press freeze indicator)
- Freeze activates immediately on confirmation

**Freeze Protection:**
- When active, prevents streak reset for that week
- User can complete 0 push-ups that week without losing streak
- Week must have some activity to be eligible (prevents abuse)

### Notification & Feedback

**Weekly Challenge Display:**
- **Replaces** the "Today - x Push-up" box on Home screen
- Shows: "SFIDA SETTIMANALE" title, challenge icon, target, progress bar, reward points
- Popup on press explains challenge type, what changes weekly, current progress

**Challenge Completion:**
- Both feedback methods trigger:
  1. Challenge box updates to show "COMPLETATO" with checkmark
  2. Banner slides in from top (like achievement popups) showing points earned

**Streak Freeze Display:**
- Positioned **below the calendar** on Home screen
- Centered large display (not compact side layout)
- Progress ring + shield icon (orange tones matching app theme)
- Popup on press explains: what freeze does, 1-week protection duration, how many available

### UI Placement

**Home Screen Layout:**
1. Weekly Challenge box (replaces Today box)
2. Calendar (existing)
3. Streak Freeze indicator (new, below calendar)

**Visual Style:**
- Shield icon with orange tones (matching app's primary #FF6B00)
- Progress ring shows available freeze count
- Large circular display centered below calendar

---

## Specific Ideas

- "Weekly challenge from the Today box - make it look cool with icon, target, progress, and points visible"
- "Challenge changes every week randomly - keeps it interesting"
- "Streak freeze below calendar, centered, with shield icon in orange tones - make it match app theme"
- "Both in-box completion state AND banner notification when challenge completes - celebrate the win"

---

## Claude's Discretion

- Exact progress bar/progress ring visual design
- Challenge box typography and spacing
- Popup dialog exact wording (Italian localization required)
- Random selection algorithm (true random or weighted)
- Challenge target calculation formulas per type (how to determine X for each challenge)

---

## Deferred Ideas

- None — discussion stayed within phase scope

---

*Phase: 03.4-challenges-streak-freeze*
*Context gathered: 2026-01-26*
