---
phase: 05-icon-settings-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - push_up_5050/pubspec.yaml
  - push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml
  - push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml
  - push_up_5050/android/app/src/main/res/values/ic_launcher_background.xml
autonomous: false

must_haves:
  truths:
    - "App launches with original icon.png as the launcher icon on Android devices"
    - "Adaptive icon configuration (foreground/background layers) removed from pubspec.yaml"
    - "Android mipmap-anydpi-v26 XML files removed or updated to use single icon"
  artifacts:
    - path: "push_up_5050/pubspec.yaml"
      provides: "Flutter launcher icons configuration"
      contains: "flutter_launcher_icons"
      excludes: "adaptive_icon_foreground"
    - path: "push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml"
      provides: "Android API 26+ launcher icon reference"
  key_links:
    - from: "push_up_5050/pubspec.yaml"
      to: "push_up_5050/assets/launcher/icon.png"
      via: "image_path in flutter_launcher_icons config"
      pattern: "image_path.*icon.png"
---

<objective>
Restore the original icon.png as the main launcher icon by removing adaptive icon configuration.

Purpose: User wants to revert to the original branding icon.png instead of the adaptive icon with foreground/background layers added in v2.6.

Output: App uses icon.png as the launcher icon on all Android devices, adaptive icon config removed.
</objective>

<execution_context>
@C:\Users\olegn\.claude\get-shit-done/workflows/execute-plan.md
@C:\Users\olegn\.claude\get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md

# Current icon configuration
@push_up_5050/pubspec.yaml
@push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml
@push_up_5050/assets/launcher/icon.png
</context>

<tasks>

<task type="auto">
  <name>Remove adaptive icon configuration from pubspec.yaml</name>
  <files>push_up_5050/pubspec.yaml</files>
  <action>
    Edit the flutter_launcher_icons section in pubspec.yaml:
    1. Remove the adaptive_icon_foreground line
    2. Remove the adaptive_icon_background line
    3. Keep only: android: true, ios: false, image_path: "assets/launcher/icon.png", min_sdk_android: 21

    The resulting config should be:
    ```yaml
    flutter_launcher_icons:
      android: true
      ios: false
      image_path: "assets/launcher/icon.png"
      min_sdk_android: 21
    ```
  </action>
  <verify>grep -A 5 "flutter_launcher_icons:" push_up_5050/pubspec.yaml shows no adaptive_icon entries</verify>
  <done>pubspec.yaml has no adaptive_icon_foreground or adaptive_icon_background entries</done>
</task>

<task type="auto">
  <name>Remove or update Android adaptive icon XML files</name>
  <files>push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml</files>
  <action>
    Remove the adaptive icon XML files since we're using the legacy single icon approach:
    1. Delete push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml
    2. Delete push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml
    3. Delete push_up_5050/android/app/src/main/res/values/ic_launcher_background.xml (if exists)
    4. Delete all ic_launcher_foreground.png files from mipmap-* directories

    This allows Android to fall back to the legacy mipmap icons (ic_launcher.png in each density folder).
  </action>
  <verify>
    ls push_up_5050/android/app/src/main/res/mipmap-anydpi-v26/ shows no ic_launcher.xml files
    ls push_up_5050/android/app/src/main/res/mipmap-*/ic_launcher_foreground.png returns empty
  </verify>
  <done>Adaptive icon XML files and foreground assets are removed</done>
</task>

<task type="auto">
  <name>Regenerate launcher icons with flutter_launcher_icons</name>
  <files>push_up_5050/android/app/src/main/res/mipmap-*/ic_launcher.png</files>
  <action>
    Run the flutter_launcher_icons generator to regenerate all launcher icons from icon.png:
    1. cd push_up_5050
    2. flutter pub get
    3. dart run flutter_launcher_icons

    This generates new mipmap icons from the single icon.png source.
  </action>
  <verify>
    flutter pub run flutter_launcher_icons completes without errors
    Icons exist in mipmap-hdpi through mipmap-xxxhdpi directories
  </verify>
  <done>All launcher icon densities regenerated from icon.png</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Icon restoration complete: pubspec.yaml updated, adaptive icon files removed, new icons generated</what-built>
  <how-to-verify>
    1. Build and install the app on an Android device or emulator:
       cd push_up_5050 && flutter build apk --release
    2. Install the APK and check the app icon on the home screen
    3. Verify the icon matches the original icon.png design
    4. Test on multiple launchers if possible (stock launcher, Nova Launcher, etc.)
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues with the icon display</resume-signal>
</task>

</tasks>

<verification>
Overall phase checks after icon restoration:
1. App icon on home screen matches original icon.png
2. Icon displays correctly on various Android launchers
3. No visual artifacts or missing icon layers
4. APK builds successfully with new icon configuration
</verification>

<success_criteria>
Measurable completion:
- pubspec.yaml contains no adaptive_icon_foreground or adaptive_icon_background entries
- mipmap-anydpi-v26/ic_launcher.xml files removed
- All mipmap densities contain ic_launcher.png (not foreground)
- App launches with correct icon on Android home screen
</success_criteria>

<output>
After completion, create `.planning/phases/05-icon-settings-cleanup/05-01-SUMMARY.md` with:
- What was changed (pubspec.yaml, deleted files)
- Icon regeneration results
- Any issues encountered
- Verification status (user approved or issues noted)
</output>
