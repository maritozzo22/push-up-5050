---
phase: 05-icon-settings-cleanup
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - push_up_5050/lib/screens/settings/settings_screen.dart
  - push_up_5050/lib/services/notification_service.dart
autonomous: true

must_haves:
  truths:
    - "Settings screen displays without 'Test notifications' section"
    - "Settings layout remains visually consistent after section removal"
    - "No other settings sections are affected by the change"
  artifacts:
    - path: "push_up_5050/lib/screens/settings/settings_screen.dart"
      provides: "Settings screen UI without test notification section"
      excludes: "Test Notifiche|_TestButtonTile|showTestNotification"
    - path: "push_up_5050/lib/services/notification_service.dart"
      provides: "Notification service (test methods may remain unused)"
  key_links:
    - from: "push_up_5050/lib/screens/settings/settings_screen.dart"
      to: "NotificationService"
      via: "Consumer or Provider access"
      pattern: "NotificationService"
---

<objective>
Remove the "Test notifications" section from the Settings screen.

Purpose: Clean up the Settings UI by removing the temporary "Test Notifiche" section that was added for notification testing during v2.6 development.

Output: Settings screen without test notification buttons, layout remains consistent.
</objective>

<execution_context>
@C:\Users\olegn\.claude\get-shit-done/workflows/execute-plan.md
@C:\Users\olegn\.claude\get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md

# Current Settings screen with test section
@push_up_5050/lib/screens/settings/settings_screen.dart
</context>

<tasks>

<task type="auto">
  <name>Remove Test notifications section from Settings screen</name>
  <files>push_up_5050/lib/screens/settings/settings_screen.dart</files>
  <action>
    Remove the "Test Notifiche" section from the Settings screen:
    1. Find the section starting with comment "// Test Notifications (TEMPORANEA)" around line 166
    2. Delete the entire _SettingsSectionCard widget for test notifications (lines ~166-215)
    3. Remove the _TestButtonTile widget class definition at the bottom of the file (lines ~840-908)
    4. Ensure proper spacing - the Audio Settings card should directly follow the Notifications Settings card with a single SizedBox(height: 16) between them

    The section to remove includes:
    - The comment "// Test Notifications (TEMPORANEA)"
    - The entire _SettingsSectionCard with Icons.science icon and "Test Notifiche" title
    - Both _TestButtonTile widgets ("Test Notifica Semplice" and "Test Programmata (5 sec)")
    - The _TestButtonTile widget class definition

    Keep all other settings sections unchanged.
  </action>
  <verify>
    grep -i "test.*notifica\|_TestButtonTile\|showTestNotification" push_up_5050/lib/screens/settings/settings_screen.dart returns nothing
    File compiles without errors: flutter analyze push_up_5050/lib/screens/settings/settings_screen.dart
  </verify>
  <done>"Test notifications" section completely removed from Settings screen</done>
</task>

<task type="auto">
  <name>Verify Settings screen layout consistency</name>
  <files>push_up_5050/lib/screens/settings/settings_screen.dart</files>
  <action>
    Verify the layout remains consistent after removing the test section:
    1. Check that all remaining settings cards are still present in order:
       - Language Settings
       - Sensor Settings
       - Feedback Settings
       - Workout Settings
       - Notifications Settings
       - Audio Settings
       - Reset buttons
    2. Ensure spacing between cards is consistent (SizedBox(height: 16) between cards)
    3. Verify no orphaned SizedBox or padding exists where the test section was removed

    The transition should be:
    Notifications Settings card -> SizedBox(height: 16) -> Audio Settings card
  </action>
  <verify>
    flutter analyze shows no layout or spacing issues
    All remaining settings sections appear in correct order
  </verify>
  <done>Settings layout is visually consistent with proper spacing</done>
</task>

<task type="auto">
  <name>Run tests to verify Settings screen functionality</name>
  <files>push_up_5050/lib/screens/settings/settings_screen.dart</files>
  <action>
    Run existing widget tests for the Settings screen to ensure no regressions:
    1. cd push_up_5050
    2. flutter test test/screens/settings/ --reporter expanded

    Check that all tests pass. If there are tests specifically for the test notification section, those will need to be updated or removed.
  </action>
  <verify>
    flutter test test/screens/settings/ completes with all tests passing
    No tests reference "test notification" or "showTestNotification"
  </verify>
  <done>All Settings screen tests pass after test section removal</done>
</task>

</tasks>

<verification>
Overall phase checks after Settings cleanup:
1. Settings screen loads without errors
2. "Test notifications" section is not visible
3. All other settings sections work correctly (toggles, sliders, dropdowns)
4. Visual layout is consistent with proper spacing between cards
5. Widget tests pass
</verification>

<success_criteria>
Measurable completion:
- settings_screen.dart contains no "Test Notifiche" or _TestButtonTile references
- All remaining settings sections display correctly
- Settings layout has consistent 16px spacing between cards
- All existing tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/05-icon-settings-cleanup/05-02-SUMMARY.md` with:
- Files modified (settings_screen.dart)
- Lines removed (test notification section and _TestButtonTile class)
- Test results
- Any issues encountered
</output>
