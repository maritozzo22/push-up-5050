# Plan 04.1-02: Verify Recovery Time Configuration and Persistence

**Parent Phase:** 04.1 - Quick Fixes
**Created:** 2026-01-29
**Status:** Pending

## Goal

Verify that the recovery time system works correctly with the new 10-second default after plan 04.1-01 is complete.

## Prerequisites

- Plan 04.1-01 must be completed successfully
- Default recovery time in SeriesSelectionScreen is now 10 seconds
- All tests have been updated and pass

## Verification Steps

### 1. Unit Test Verification

Run the AppSettingsService test to verify the service default is still 10:

```bash
flutter test test/services/app_settings_service_test.dart
```

**Expected Result:** All tests pass, especially:
- Line 184-187: `'should have default value of 10 seconds'` ✓

### 2. Widget Test Verification

Run the SeriesSelectionScreen test to verify the UI shows 10 by default:

```bash
flutter test test/screens/series_selection/series_selection_screen_test.dart
```

**Expected Result:** All tests pass with 10 as the default:
- `'rest time default value is 10'` ✓
- `'displays default values when no saved preferences'` shows 10 ✓
- `'restTime defaults to 10 when no saved preferences'` ✓

### 3. Full Test Suite

Run all tests to ensure no regressions:

```bash
flutter test
```

**Expected Result:** All tests pass

### 4. Manual Verification (Optional)

If running on a physical device/emulator:

1. Uninstall the app completely
2. Install fresh version
3. Navigate to Series Selection screen
4. Verify recovery time displays "10" by default
5. Test increment/decrement buttons (5-120 range still works)
6. Save preferences and restart app
7. Verify saved value persists

## Edge Cases to Verify

| Scenario | Expected Behavior |
|----------|-------------------|
| New install (no saved prefs) | Shows 10 seconds |
| Existing user with saved 30s | Shows 30 seconds (unchanged) |
| Existing user with saved 60s | Shows 60 seconds (unchanged) |
| Invalid saved value (< 5) | Falls back to 10 seconds |
| Invalid saved value (> 120) | Falls back to 10 seconds |
| User changes to 45s | Saves and persists 45s |

## Acceptance Criteria

- [ ] All unit tests pass
- [ ] All widget tests pass
- [ ] `AppSettingsService.defaultRecoveryTime` returns 10 for new users
- [ ] `SeriesSelectionScreen` displays 10 by default for new users
- [ ] Existing saved values (30, 45, 60, etc.) load correctly
- [ ] Recovery time range (5-120) still enforced
- [ ] Persistence across app restarts works

## Success Metrics

1. **Test Coverage:** All tests pass
2. **Correct Default:** New users see 10 seconds
3. **Backward Compatibility:** Existing users unaffected
4. **No Regressions:** All other functionality works

## Notes

- This plan is primarily verification after the changes in 04.1-01
- If any issues found, document them and fix before marking complete
- No code changes expected unless issues are discovered

---

*Plan: 04.1-02*
*Created: 2026-01-29*
