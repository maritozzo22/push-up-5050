# Plan 04.1-01: Update Default Recovery Time to 10 Seconds

**Parent Phase:** 04.1 - Quick Fixes
**Created:** 2026-01-29
**Status:** Pending

## Goal

Update the default recovery time from 30 to 10 seconds in the Series Selection Screen.

## Current State

- `AppSettingsService._defaultRecoveryTime` is already 10 âœ“
- `SeriesSelectionScreen._restTime` is hardcoded to 30 (needs change)
- Tests expect 30 as default (needs update)

## Files to Modify

### 1. `push_up_5050/lib/screens/series_selection/series_selection_screen.dart`

**Line 41:**
```dart
// BEFORE:
int _restTime = 30;

// AFTER:
int _restTime = 10;
```

### 2. `push_up_5050/test/screens/series_selection/series_selection_screen_test.dart`

**Line 117-129:** Update test name and expectation
```dart
// BEFORE:
testWidgets('rest time default value is 30', (tester) async {
  // ...
  expect(find.text('30'), findsWidgets);
});

// AFTER:
testWidgets('rest time default value is 10', (tester) async {
  // ...
  expect(find.text('10'), findsWidgets);
});
```

**Line 213-228:** Update default value test
```dart
// BEFORE:
testWidgets('displays default values when no saved preferences', (tester) async {
  // ...
  expect(find.text('1'), findsWidgets);
  expect(find.text('30'), findsWidgets);
});

// AFTER:
testWidgets('displays default values when no saved preferences', (tester) async {
  // ...
  expect(find.text('1'), findsWidgets);
  expect(find.text('10'), findsWidgets);
});
```

**Line 250-268:** Update increment test
```dart
// BEFORE:
testWidgets('restTime value updates on button press', (tester) async {
  // ...
  // Value should change from 30 to 31
  expect(find.text('31'), findsOneWidget);
});

// AFTER:
testWidgets('restTime value updates on button press', (tester) async {
  // ...
  // Value should change from 10 to 11
  expect(find.text('11'), findsOneWidget);
});
```

**Line 271-289:** Update save preferences test
```dart
// BEFORE:
testWidgets('saves preferences when startingSeries changes', (tester) async {
  // ...
  expect(workoutProvider.savedRestTime, 30);
});

// AFTER:
testWidgets('saves preferences when startingSeries changes', (tester) async {
  // ...
  expect(workoutProvider.savedRestTime, 10);
});
```

**Line 312-341:** Update workout start test
```dart
// BEFORE:
expect(workoutProvider.session!.restTime, 30);

// AFTER:
expect(workoutProvider.session!.restTime, 10);
```

**Line 502-533:** Update persistence test (comments)
```dart
// BEFORE:
// Verifica default iniziale
expect(find.text('30'), findsWidgets);

// AFTER:
// Verifica default iniziale
expect(find.text('10'), findsWidgets);
```

**Line 554-571:** Update another default test
```dart
// BEFORE:
testWidgets('restTime defaults to 30 when no saved preferences', (tester) async {
  // ...
  // Dovrebbe mostrare il default di 30
  expect(find.text('30'), findsWidgets);
});

// AFTER:
testWidgets('restTime defaults to 10 when no saved preferences', (tester) async {
  // ...
  // Dovrebbe mostrare il default di 10
  expect(find.text('10'), findsWidgets);
});
```

## Execution Steps (TDD)

1. **Run tests first** to confirm they fail (RED)
   ```bash
   flutter test test/screens/series_selection/series_selection_screen_test.dart
   ```

2. **Update the code** (GREEN)
   - Modify `series_selection_screen.dart` line 41: `_restTime = 10`
   - Run tests again to verify new failures

3. **Update the tests** to match new expected behavior
   - Update all test expectations from 30 to 10
   - Run tests to verify they pass

4. **Run all tests** to ensure nothing broke
   ```bash
   flutter test
   ```

## Acceptance Criteria

- [ ] `SeriesSelectionScreen._restTime` is initialized to 10
- [ ] All tests pass after changes
- [ ] New users see 10 seconds as default recovery time
- [ ] No existing functionality broken

## Notes

- This is a simple constant change
- Existing users with saved preferences (e.g., 30, 45, 60) will keep their values
- Only new installations get the new 10-second default

---

*Plan: 04.1-01*
*Created: 2026-01-29*
