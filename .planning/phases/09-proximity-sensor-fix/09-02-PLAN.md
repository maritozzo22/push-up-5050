# 09-02-PLAN: Move Proximity Toggle from Settings to Workout Setup

## Goal

Relocate the proximity sensor toggle from Settings screen to the Workout Setup (Series Selection) screen where users configure their workout before starting.

## Requirements

- SENS-02: Proximity sensor toggle appears in Workout Setup screen (not Settings)
- SENS-03: User can enable/disable proximity mode before workout starts

## Success Criteria

1. Proximity sensor toggle removed from Settings screen
2. Toggle added to Series Selection screen
3. Toggle position is logical (near other workout options)
4. Setting persists correctly

## Changes Required

### 1. Remove Toggle from Settings Screen

**File:** `lib/screens/settings/settings_screen.dart`

**Remove** the Sensor Settings Card (lines 174-186):

```dart
// REMOVE THIS SECTION:
// Sensor Settings Card
_SettingsSectionCard(
  icon: Icons.sensors,
  title: l10n.sensors,
  child: SettingsSwitchTile(
    title: l10n.settingsProximitySensor,
    subtitle: l10n.settingsProximitySensorDesc,
    value: settings.proximitySensorEnabled,
    onChanged: (value) {
      settings.setProximitySensorEnabled(value);
    },
  ),
),
```

### 2. Add Toggle to Series Selection Screen

**File:** `lib/screens/series_selection/series_selection_screen.dart`

**Add** proximity sensor toggle near the start button:

```dart
// Add after recovery time slider, before start button

// Proximity Sensor Toggle
Consumer<AppSettingsService>(
  builder: (context, settings, child) {
    return FrostCard(
      child: SettingsSwitchTile(
        title: 'Usa Sensore di Prossimità',
        subtitle: 'Conta le ripetizioni avvicinando il petto al telefono',
        value: settings.proximitySensorEnabled,
        onChanged: (value) {
          settings.setProximitySensorEnabled(value);
        },
      ),
    );
  },
),
```

### 3. Update Localization Keys (if needed)

**Files:** `lib/l10n/app_it.arb`, `lib/l10n/app_en.arb`

Ensure we have appropriate keys for:
- Proximity sensor toggle title
- Proximity sensor description

```json
// app_it.arb
{
  "workoutProximitySensor": "Usa Sensore di Prossimità",
  "workoutProximitySensorDesc": "Conta le ripetizioni avvicinando il petto al telefono (telefono a terra)"
}

// app_en.arb
{
  "workoutProximitySensor": "Use Proximity Sensor",
  "workoutProximitySensorDesc": "Count reps by bringing chest close to phone (phone on floor)"
}
```

## Visual Design

Toggle should be:
- Near the "AVVIA ALLENAMENTO" button
- Using same FrostCard styling as other workout options
- Clear description that phone goes on floor

## Verification

- [ ] Toggle removed from Settings screen
- [ ] Toggle appears in Series Selection screen
- [ ] Toggle works (enables/disables proximity mode)
- [ ] Setting persists across app restarts
- [ ] Visual design matches app theme

## Notes

- Keep the setting in `AppSettingsService` - just move the UI control
- User should see toggle BEFORE starting workout for better UX
