---
phase: 02.2-quick-stats-widget
plan: 02b
type: execute
wave: 2
depends_on: [02.2-01, 02.2-02a]
files_modified:
  - push_up_5050/android/app/src/main/res/layout/pushup_widget_stats.xml
  - push_up_5050/android/app/src/main/res/values/widget_strings.xml
  - push_up_5050/android/app/src/main/res/values-it/widget_strings.xml
  - push_up_5050/android/app/src/main/res/values/widget_font.xml
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Layout uses 3-section vertical structure (header -> stats -> button)"
    - "Layout uses drawable resources from plan 02a"
    - "Text uses sans-serif font (similar to Montserrat)"
    - "Labels respect app language setting (IT: OGGI/TOTALE, EN: TODAY/TOTAL)"
  artifacts:
    - path: "push_up_5050/android/app/src/main/res/layout/pushup_widget_stats.xml"
      provides: "Widget layout matching mockup exactly"
      contains: "widget_background|ic_widget_logo|start_button"
    - path: "push_up_5050/android/app/src/main/res/values/widget_strings.xml"
      provides: "English widget strings"
      contains: "widget_today_label|widget_total_label"
    - path: "push_up_5050/android/app/src/main/res/values-it/widget_strings.xml"
      provides: "Italian widget strings"
      contains: "widget_today_label|widget_total_label"
  key_links:
    - from: "pushup_widget_stats.xml"
      to: "widget_background.xml"
      via: "android:background attribute"
      pattern: "android:background.*@drawable/widget_background"
    - from: "pushup_widget_stats.xml"
      to: "ic_widget_logo.xml"
      via: "ImageView src attribute"
      pattern: "android:src.*@drawable/ic_widget_logo"
    - from: "pushup_widget_stats.xml"
      to: "widget_strings.xml"
      via: "TextView text references"
      pattern: "@string/widget_"
---

# Phase 2.2-02b: Update Widget Layout XML

## Objective
Update widget XML layout to use drawable resources from plan 02a and apply proper typography.

**Purpose:** The layout needs to reference the drawables created in plan 02a, use localized strings, and apply proper font family for the mockup appearance.

**Output:** Widget layout XML fully styled to match mockup.

## Context
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md

@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02.2-quick-stats-widget/02.2-CONTEXT.md

@.planning/phases/02.2-quick-stats-widget/02.2-01-PLAN.md
@.planning/phases/02.2-quick-stats-widget/02.2-02a-PLAN.md
@push_up_5050/android/app/src/main/res/layout/pushup_widget_stats.xml
@push_up_5050/lib/core/theme/app_theme.dart

## Tasks

### Task 1: Create Font Resource for Typography
**type:** auto

**Action:**
Create `android/app/src/main/res/values/widget_font.xml` to define font family for widget text.

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="font_family_medium">sans-serif-medium</string>
    <string name="font_family_regular">sans-serif</string>
</resources>
```

Note: Android's built-in `sans-serif` and `sans-serif-medium` closely match Montserrat. For exact Montserrat, you would need to download the font files and place them in `src/main/res/font/` directory. For this implementation, use system fonts for simplicity.

**Verification:**
- Font resource file exists
- Defines font family constants

**Done:**
- Font family defined for widget

---

### Task 2: Add Missing String Resources
**type:** auto

**Action:**
Update string resource files to include missing strings for the layout.

Add to `android/app/src/main/res/values/widget_strings.xml`:
```xml
<string name="widget_logo_desc">PUSHUP 5050 logo</string>
```

Add to `android/app/src/main/res/values-it/widget_strings.xml`:
```xml
<string name="widget_logo_desc">Logo PUSHUP 5050</string>
```

**Verification:**
- All strings referenced in layout exist in resources
- Both English and Italian versions exist

**Done:**
- All string resources defined

---

### Task 3: Update Widget Layout XML
**type:** auto

**Action:**
Update `android/app/src/main/res/layout/pushup_widget_stats.xml` to apply all visual changes using drawables from plan 02a.

Replace the entire file content with:

```xml
<?xml version="1.0" encoding="utf-8"?>
<!-- Widget 1: Quick Stats -->
<!-- Shows today's push-ups and total progress with START button -->
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/widget_background"
    android:padding="16dp">

    <!-- Header Section -->
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="12dp">

        <!-- Logo icon -->
        <ImageView
            android:id="@+id/widget_logo"
            android:layout_width="24dp"
            android:layout_height="24dp"
            android:layout_alignParentStart="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/ic_widget_logo"
            android:contentDescription="@string/widget_logo_desc" />

        <!-- Title -->
        <TextView
            android:id="@+id/widget_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:text="PUSHUP 5050"
            android:textColor="#FFFFFF"
            android:textSize="16sp"
            android:fontFamily="sans-serif-medium"
            android:textStyle="bold" />

    </RelativeLayout>

    <!-- Stats Section - Two Columns -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal"
        android:gravity="center">

        <!-- Left Column - Today -->
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical"
            android:gravity="center">

            <TextView
                android:id="@+id/today_label"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/widget_today_label"
                android:textColor="#FF6B00"
                android:textSize="12sp"
                android:fontFamily="sans-serif-medium"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/today_count"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="0"
                android:textColor="#FFFFFF"
                android:textSize="36sp"
                android:fontFamily="sans-serif-medium"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/today_unit"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/widget_pushups"
                android:textColor="#FFFFFF"
                android:textSize="11sp"
                android:fontFamily="sans-serif" />

        </LinearLayout>

        <!-- Right Column - Total -->
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical"
            android:gravity="center">

            <TextView
                android:id="@+id/total_label"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/widget_total_label"
                android:textColor="#FF6B00"
                android:textSize="12sp"
                android:fontFamily="sans-serif-medium"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/total_count"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="0 / 5050"
                android:textColor="#FFFFFF"
                android:textSize="28sp"
                android:fontFamily="sans-serif-medium"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/total_unit"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/widget_pushups"
                android:textColor="#FFFFFF"
                android:textSize="11sp"
                android:fontFamily="sans-serif" />

        </LinearLayout>

    </LinearLayout>

    <!-- START Button -->
    <Button
        android:id="@+id/start_button"
        android:layout_width="match_parent"
        android:layout_height="44dp"
        android:layout_marginTop="8dp"
        android:text="@string/widget_start"
        android:textColor="#FFFFFF"
        android:textSize="16sp"
        android:fontFamily="sans-serif-medium"
        android:textStyle="bold"
        android:background="@drawable/widget_start_button_selector"
        android:stateListAnimator="@null"
        android:elevation="4dp" />

</LinearLayout>
```

**Verification:**
- Layout uses `@drawable/widget_background` for background
- Header includes logo icon and centered title
- Stats section has 2 columns with correct IDs
- START button uses `@drawable/widget_start_button_selector`
- Font family references sans-serif-medium
- Text sizes match mockup (today: 36sp, total: 28sp, labels: 12sp, units: 11sp)

**Done:**
- Widget layout fully styled to match mockup

---

## Verification
After completing all tasks:
- [ ] Font resource file created
- [ ] All string resources defined (EN + IT)
- [ ] Layout XML uses all drawables from plan 02a
- [ ] Layout uses localized strings
- [ ] Build compiles without errors

## Success Criteria
- Widget visually matches mockup specifications
- Corner radius is applied via background drawable
- Background is #121212 dark
- START button has orange glow effect
- Logo icon appears in header
- Text uses sans-serif-medium font (similar to Montserrat)
- Labels localize based on device language

## Output
After completion, create `.planning/phases/02.2-quick-stats-widget/02.2-02b-SUMMARY.md`
